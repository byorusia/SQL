# 特定年カテゴリ書籍照会

## 📖 問題文（日本語訳）

以下はある書店で販売中の書籍情報を含む BOOK テーブルです。

BOOK テーブルから 2021 年に出版された「人文」カテゴリに属する書籍リストを見つけて、書籍 ID（BOOK_ID）、出版日（PUBLISHED_DATE）を出力する SQL 文を作成してください。

結果は出版日を基準に昇順ソートしてください。

## 📊 テーブル構造

### BOOK テーブル

BOOK テーブルは各書籍の情報を含むテーブルです。

| Column name    | Type       | Nullable | Description                              |
| -------------- | ---------- | -------- | ---------------------------------------- |
| BOOK_ID        | INTEGER    | FALSE    | 書籍 ID                                  |
| CATEGORY       | VARCHAR(N) | FALSE    | カテゴリ（경제、인문、소설、생활、기술） |
| AUTHOR_ID      | INTEGER    | FALSE    | 著者 ID                                  |
| PRICE          | INTEGER    | FALSE    | 販売価格（ウォン）                       |
| PUBLISHED_DATE | DATE       | FALSE    | 出版日                                   |

**サンプルデータ:**

| BOOK_ID | CATEGORY | AUTHOR_ID | PRICE | PUBLISHED_DATE |
| ------- | -------- | --------- | ----- | -------------- |
| 1       | 인문     | 1         | 10000 | 2020-01-01     |
| 2       | 경제     | 2         | 9000  | 2021-02-05     |
| 3       | 인문     | 2         | 11000 | 2021-04-11     |
| 4       | 인문     | 3         | 10000 | 2021-03-15     |
| 5       | 생활     | 1         | 12000 | 2021-01-10     |

## 🎯 期待される出力

| BOOK_ID | PUBLISHED_DATE |
| ------- | -------------- |
| 4       | 2021-03-15     |
| 3       | 2021-04-11     |

## 💡 解答

```sql
SELECT
    BOOK_ID,
    DATE_FORMAT(PUBLISHED_DATE, '%Y-%m-%d') AS PUBLISHED_DATE
FROM BOOK
WHERE YEAR(PUBLISHED_DATE) = 2021
    AND CATEGORY = '인문'
ORDER BY PUBLISHED_DATE ASC;
```

## 📝 解説

### アプローチ

1. BOOK テーブルから BOOK_ID と PUBLISHED_DATE カラムを選択
2. WHERE 句で出版年が 2021 年かつカテゴリが '인문'（人文）の条件を指定
3. DATE_FORMAT 関数で日付を 'YYYY-MM-DD' 形式に変換
4. 出版日の昇順でソート

### 解答の流れ

**2021 年に出版された '인문' カテゴリの書籍：**

- BOOK_ID = 3: 2021-04-11
- BOOK_ID = 4: 2021-03-15

**除外される書籍：**

- BOOK_ID = 1: カテゴリは '인문' だが 2020 年出版
- BOOK_ID = 2: 2021 年出版だがカテゴリが '경제'
- BOOK_ID = 5: 2021 年出版だがカテゴリが '생활'

**ソート順：**

出版日昇順（早い順）：2021-03-15 → 2021-04-11

### 学習ポイント

- **YEAR 関数**: DATE 型から年を抽出
- **WHERE 句の複数条件**: AND 演算子で複数条件を組み合わせる
- **DATE_FORMAT 関数**: 日付データを指定した形式で出力
- **日付比較**: DATE 型データの比較とフィルタリング

### 年の抽出方法（複数の書き方）

```sql
-- YEAR 関数を使用（推奨：読みやすい）
WHERE YEAR(PUBLISHED_DATE) = 2021

-- BETWEEN 句を使用（範囲指定）
WHERE PUBLISHED_DATE BETWEEN '2021-01-01' AND '2021-12-31'

-- 比較演算子を使用
WHERE PUBLISHED_DATE >= '2021-01-01' AND PUBLISHED_DATE < '2022-01-01'
```

YEAR 関数が最もシンプルで意図が明確なため、この問題では YEAR 関数を使用しています。

### DATE_FORMAT の重要性

問題文に「PUBLISHED_DATE のデートフォーマットが例示と同一でなければ正答処理されません」とあります。

```sql
-- DATE_FORMAT なし（データベースのデフォルト形式）
SELECT PUBLISHED_DATE  -- 結果: 2021-03-15 00:00:00 または DB 依存

-- DATE_FORMAT あり（指定した形式）
SELECT DATE_FORMAT(PUBLISHED_DATE, '%Y-%m-%d')  -- 結果: 2021-03-15
```

正確な出力形式を保証するため、DATE_FORMAT の使用が重要です。

## 🔑 キーワード

- SELECT（特定カラム）
- WHERE 句（複数条件）
- AND 演算子
- YEAR 関数
- DATE_FORMAT 関数
- ORDER BY（昇順）

# 中古取引掲示板とコメント結合

## 📖 問題文（日本語訳）

以下は中古取引掲示板情報を含む USED_GOODS_BOARD テーブルと、中古取引掲示板コメント情報を含む USED_GOODS_REPLY テーブルです。

USED_GOODS_BOARD と USED_GOODS_REPLY テーブルから、2022 年 10 月に作成された投稿のタイトル、投稿 ID、コメント ID、コメント作成者 ID、コメント内容、コメント作成日を照会する SQL 文を作成してください。

結果はコメント作成日を基準に昇順で整列し、コメント作成日が同じ場合は投稿タイトルを基準に昇順で整列してください。
test

## 📊 テーブル構造

### USED_GOODS_BOARD テーブル

BOARD_ID、WRITER_ID、TITLE、CONTENTS、PRICE、CREATED_DATE、STATUS、VIEWS は、それぞれ投稿 ID、作成者 ID、投稿タイトル、投稿内容、価格、作成日、取引状態、閲覧数を意味します。

| Column name  | Type          | Nullable |
| ------------ | ------------- | -------- |
| BOARD_ID     | VARCHAR(5)    | FALSE    |
| WRITER_ID    | VARCHAR(50)   | FALSE    |
| TITLE        | VARCHAR(100)  | FALSE    |
| CONTENTS     | VARCHAR(1000) | FALSE    |
| PRICE        | NUMBER        | FALSE    |
| CREATED_DATE | DATE          | FALSE    |
| STATUS       | VARCHAR(10)   | FALSE    |
| VIEWS        | NUMBER        | FALSE    |

**サンプルデータ:**

| BOARD_ID | WRITER_ID | TITLE                        | CONTENTS                                       | PRICE  | CREATED_DATE | STATUS | VIEWS |
| -------- | --------- | ---------------------------- | ---------------------------------------------- | ------ | ------------ | ------ | ----- |
| B0001    | kwag98    | ペット用トイレシート売ります | 本当に格安で販売します。全て未開封の新品です。 | 12000  | 2022-10-01   | DONE   | 250   |
| B0002    | lee871201 | 国産炒りゴマ                 | 自家栽培のゴマです。                           | 3000   | 2022-10-02   | DONE   | 121   |
| B0003    | goung12   | バドミントンラケット         | 買ったまま放置していたので売ります。           | 9000   | 2022-10-02   | SALE   | 212   |
| B0004    | keel1990  | Dior イヤリング              | 新世界カンナム店で購入。偽物なら 100%返金      | 130000 | 2022-10-02   | SALE   | 199   |
| B0005    | haphli01  | スパムクラシック売ります     | 賞味期限は 2025 年までです                     | 10000  | 2022-10-02   | SALE   | 121   |

### USED_GOODS_REPLY テーブル

REPLY_ID、BOARD_ID、WRITER_ID、CONTENTS、CREATED_DATE は、それぞれコメント ID、投稿 ID、作成者 ID、コメント内容、作成日を意味します。

| Column name  | Type          | Nullable |
| ------------ | ------------- | -------- |
| REPLY_ID     | VARCHAR(10)   | FALSE    |
| BOARD_ID     | VARCHAR(5)    | FALSE    |
| WRITER_ID    | VARCHAR(50)   | FALSE    |
| CONTENTS     | VARCHAR(1000) | TRUE     |
| CREATED_DATE | DATE          | FALSE    |

**サンプルデータ:**

| REPLY_ID   | BOARD_ID | WRITER_ID | CONTENTS                         | CREATED_DATE |
| ---------- | -------- | --------- | -------------------------------- | ------------ |
| R000000001 | B0001    | s2s2123   | 購入します。メッセージ送ります。 | 2022-10-02   |
| R000000002 | B0002    | hoho1112  | メッセージください。             | 2022-10-03   |
| R000000003 | B0006    | hwahwa2   | 買います。連絡ください。         | 2022-10-03   |
| R000000004 | B0007    | hong02    | 予約中                           | 2022-10-06   |
| R000000005 | B0009    | hanju23   | 購入完了                         | 2022-10-07   |

## 🎯 期待される出力

| TITLE                        | BOARD_ID | REPLY_ID   | WRITER_ID | CONTENTS                         | CREATED_DATE |
| ---------------------------- | -------- | ---------- | --------- | -------------------------------- | ------------ |
| ペット用トイレシート売ります | B0001    | R000000001 | s2s2123   | 購入します。メッセージ送ります。 | 2022-10-02   |
| 国産炒りゴマ                 | B0002    | R000000002 | hoho1112  | メッセージください。             | 2022-10-03   |

## 💡 解答

```sql
SELECT
    B.TITLE,
    B.BOARD_ID,
    R.REPLY_ID,
    R.WRITER_ID,
    R.CONTENTS,
    DATE_FORMAT(R.CREATED_DATE, '%Y-%m-%d') AS CREATED_DATE
FROM USED_GOODS_BOARD B
INNER JOIN USED_GOODS_REPLY R
    ON B.BOARD_ID = R.BOARD_ID
WHERE B.CREATED_DATE BETWEEN '2022-10-01' AND '2022-10-30'
ORDER BY R.CREATED_DATE ASC, B.TITLE ASC;
```

## 📝 解説

### アプローチ

1. USED_GOODS_BOARD と USED_GOODS_REPLY を BOARD_ID で内部結合
2. WHERE 句で 2022 年 10 月に作成された投稿をフィルタリング
3. コメント作成日、投稿タイトルの順で昇順ソート
4. DATE_FORMAT 関数で日付フォーマットを調整

### 学習ポイント

- **INNER JOIN**: 両方のテーブルに一致するレコードのみを取得
- **日付フィルタリング**: BETWEEN 句を使用して特定期間のデータを抽出
- **複数カラムのソート**: ORDER BY で複数カラムを指定して優先順位をつける
- **日付フォーマット**: DATE_FORMAT 関数で出力形式を指定

## 🔑 キーワード

- INNER JOIN
- DATE_FORMAT
- BETWEEN
- ORDER BY（複数カラム）
